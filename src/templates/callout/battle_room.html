 {% extends "index.html" %}

{% block content %}
   <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
 {% load static %}
 <link rel="stylesheet" type="text/css" href="{% static 'css/mycss.css' %}" >
 <body style="background-repeat:no-repeat;background-attachment: fixed;">
<div class="my-container">
<div class="centered-object">

 <a class="text-list">Hello from battle room</a>
<br><br><br><br><br>
    <h1>WebRTC Video Call</h1>


    <video id="localVideo" autoplay></video>
    <video id="remoteVideo" autoplay></video>
    <script>
        const localVideo = document.getElementById("localVideo");
        const remoteVideo = document.getElementById("remoteVideo");
        const configuration = {
            iceServers: [{urls: "stun:stun.l.google.com:19302"}]
        };
        let peerConnection = new RTCPeerConnection(configuration);
        navigator.mediaDevices.getUserMedia({video: true, audio: true})
            .then(stream => {
                localVideo.srcObject = stream;
                stream.getTracks().forEach(track => peerConnection.addTrack(track, stream));
            })
            .catch(error => console.error(error));
        peerConnection.addEventListener("track", event => {
            remoteVideo.srcObject = event.streams[0];
        });
    </script>


</div>
</div>
</body>
 {% endblock %}